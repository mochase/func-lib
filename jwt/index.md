# JWT( json web token)

## 组成

一个JWT实际上就是一个字符串，它由三部分组成，头部、载荷与签名。

格式: `头部.荷载.签名`

头部信息参考:
```js
{
  "typ": "JWT",
  "alg": "HS256"
}
```

荷载信息参考(存放了一些基础信息和用户身份信息):
```js
{
    "iss": "John Wu JWT",
    "iat": 1441593502,
    "exp": 1441594722,
    "aud": "www.example.com",
    "sub": "jrocket@example.com",
    "from_user": "B",
    "target_user": "A"
}
```

***jwt的头部和荷载都是通过 base64 编码生成.*** 所以是可以被直接破解的.

***因为荷载是通过 base64 编码生成,所以不能用来传递敏感信息***

签名是通过对`头部.荷载`进行加密得到,因为无法获知秘钥,所以保证了签名无法被伪造. 即无法伪造 jwt.

jwt 可以放在 http header 中,也可以放在 cookie 中,因为用户的身份信息实际上被存放在了 ***客户端***, 所以可以很方便的做单点登录.(针对同一客户端) 参考下面的情景: 

用户A 在 a.taobao.com 登录以后获取了 token,这时跳转到 b.taobao.com, 由于携带了有效 token,依然是登录状态.

***安全考虑, 登录操作获取 token 的过程需要走 https. 一旦 token 被嗅探到, 第三者可以直接伪造成该用户,获得该用户的权限(即使无法篡改 token)***

