<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
</head>
<body>
    hello world
</body>
<script>
const data = `
    <!DOCTYPE html>
    <!--STATUS OK-->
    <html>



    <head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta name="referrer" content="always" />
    <meta name="description" content="东北地区用张三指代狼，泛指人称代词，代表普通的某个人，多指男性。在某些方言或与语境里有特殊意义。南方地区用张三代指某个人，通常是举例的时候泛指某些人。张三和李四、王五、王大麻子通常联系在一起被使用。...">
    <title>张三（汉语词汇）_百度百科</title>
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon" />
    <link rel="icon" sizes="any" mask href="//www.baidu.com/img/baidu.svg">

    <meta name="keywords" content="张三 张三简介 张三张三族 张三表现">
    <meta name="image" content="https://bkssl.bdimg.com/cms/static/baike.png">

    <link rel="stylesheet" type="text/css" href="https://bkssl.bdimg.com/static/wiki-lemma/pkg/wiki-lemma_0d0a0e0.css"/><link rel="stylesheet" type="text/css" href="https://bkssl.bdimg.com/static/wiki-common/pkg/wiki-common-base_9a9fb54.css"/><link rel="stylesheet" type="text/css" href="https://bkssl.bdimg.com/static/wiki-common/widget/component/userbar-n/userbar-n_2890903.css"/><link rel="stylesheet" type="text/css" href="https://bkssl.bdimg.com/static/wiki-common/widget/lib/larkplayer/larkplayer_981c735.css"/><link rel="stylesheet" type="text/css" href="https://bkssl.bdimg.com/static/wiki-common/widget/lib/webuploader/webuploader_08d9db4.css"/><link rel="stylesheet" type="text/css" href="https://bkssl.bdimg.com/static/wiki-lemma/pkg/wiki-lemma-module_9d93046.css"/><link rel="stylesheet" type="text/css" href="https://bkssl.bdimg.com/static/wiki-lemma/widget/tools/announcement/announcement_cba33f4.css"/><link rel="stylesheet" type="text/css" href="https://bkssl.bdimg.com/static/wiki-lemma/widget/tools/label/label_1b0bc0e.css"/><link rel="stylesheet" type="text/css" href="https://bkssl.bdimg.com/static/wiki-lemma/widget/tools/newSideShare/sideShare_9c411cd.css"/><link rel="stylesheet" type="text/css" href="https://bkssl.bdimg.com/static/wiki-lemma/widget/tools/video/pageMask/pageMask_ff9a193.css"/><link rel="stylesheet" type="text/css" href="https://bkssl.bdimg.com/static/wiki-lemma/widget/lemma_content/mainContent/mainContent_98e3702.css"/><link rel="stylesheet" type="text/css" href="https://bkssl.bdimg.com/static/wiki-lemma/widget/lemma_content/mainContent/lemmaRelation/lemmaRelation_496a30a.css"/><link rel="stylesheet" type="text/css" href="https://bkssl.bdimg.com/static/wiki-lemma/widget/lemma_content/configModule/zhixin/zhixin_3b0d7a5.css"/><link rel="stylesheet" type="text/css" href="https://bkssl.bdimg.com/static/wiki-lemma/widget/tools/searchHeader/toolButtons-n/toolButtons-n_8b4919b.css"/><link rel="stylesheet" type="text/css" href="https://bkssl.bdimg.com/static/wiki-lemma/widget/tools/searchHeader/toolButtons-n/userInfo-n_7e90184.css"/><link rel="stylesheet" type="text/css" href="https://bkssl.bdimg.com/static/wiki-lemma/widget/tools/searchHeader/searchHeader-n_f9a6e5b.css"/>    
    </head>

    <body class="wiki-lemma normal">


    <div class="header-wrapper pc-header-new">
    <div class="topbar cmn-clearfix">
    <ul class="wgt-userbar wgt-userbar-n" id="j-wgt-userbar">
    <li>
    <a href="http://www.baidu.com/">百度首页</a>
    </li>
    </ul>
    </html>
`

function cssParser (data) {
    let linkArr = []
    let link
    const re = /<link.*?>/gsi
    const re2 = /(?<=href\=").*"/i
    while ((link = re.exec(data)) !== null) {
        const str = link[0]
        if (str.indexOf('stylesheet') > -1 || str.indexOf('text/css') > -1) {
            let url = (re2.exec(str))[0]
            url = url.slice(0, url.length - 1)
            linkArr.push(url)
        }
    }
    linkArr.forEach(v => {

        console.log(v)
        const img = new Image()
        img.src = v
        img.onload = (e) => {
            console.log(e)
        }
        img.onerror = (e) => {
            console.log(e)
        }
        // img.on
    })

    // const promise = new Promise(function (resolve, reject) {

        
    // })
}

cssParser(data)
</script>
</html>